(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],f=0,l=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);m&&m(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=f(f.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function i(e){return f.p+"js/"+({}[e]||e)+"."+{"chunk-26b43b54":"9208f9be","chunk-2d21a3c8":"ee33c3d9","chunk-4513154d":"f4235171","chunk-4ba3999c":"9bfbf3da"}[e]+".js"}var s={};var u={"62ea":function(){return{"./doclight_wasm_bg.js":{__wbindgen_object_drop_ref:function(e){return r["21ff"].exports["k"](e)},__wbindgen_object_clone_ref:function(e){return r["21ff"].exports["j"](e)},__wbg_new0_1dc5063f3422cdfe:function(){return r["21ff"].exports["h"]()},__wbindgen_string_new:function(e,t){return r["21ff"].exports["m"](e,t)},__wbindgen_debug_string:function(e,t){return r["21ff"].exports["i"](e,t)},__wbg_getFullYear_d36bab73ea41bdb6:function(e){return r["21ff"].exports["c"](e)},__wbg_getMonth_230e874babdb45b0:function(e){return r["21ff"].exports["f"](e)},__wbg_getDate_135a9258de93192a:function(e){return r["21ff"].exports["b"](e)},__wbg_getHours_a4567070ccd729ea:function(e){return r["21ff"].exports["d"](e)},__wbg_getMinutes_64a0cad5794f4969:function(e){return r["21ff"].exports["e"](e)},__wbg_getSeconds_8eb60717571f83cf:function(e){return r["21ff"].exports["g"](e)},__wbindgen_throw:function(e,t){return r["21ff"].exports["n"](e,t)},__wbindgen_rethrow:function(e){return r["21ff"].exports["l"](e)}}}}};function f(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}f.e=function(e){var t=[],n={"chunk-26b43b54":1,"chunk-4513154d":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-26b43b54":"58e8f006","chunk-2d21a3c8":"31d6cfe0","chunk-4513154d":"31b85913","chunk-4ba3999c":"31d6cfe0"}[e]+".css",o=f.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],u=s.getAttribute("data-href");if(u===r||u===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],d.parentNode.removeChild(d),n(c)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,f.nc&&d.setAttribute("nonce",f.nc),d.src=i(e);var p=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}var b={"chunk-4ba3999c":["62ea"]}[e]||[];return b.forEach((function(e){var n=s[e];if(n)t.push(n);else{var r,a=u[e](),o=fetch(f.p+""+{"62ea":"cc51c8fb35b2f598b71a"}[e]+".module.wasm");if(a instanceof Promise&&"function"===typeof WebAssembly.compileStreaming)r=Promise.all([WebAssembly.compileStreaming(o),a]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"===typeof WebAssembly.instantiateStreaming)r=WebAssembly.instantiateStreaming(o,a);else{var c=o.then((function(e){return e.arrayBuffer()}));r=c.then((function(e){return WebAssembly.instantiate(e,a)}))}t.push(s[e]=r.then((function(t){return f.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},f.m=e,f.c=r,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},f.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,t){if(1&t&&(e=f(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)f.d(n,r,function(t){return e[t]}.bind(null,r));return n},f.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="/doclight/",f.oe=function(e){throw console.error(e),e},f.w={};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var m=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},cd49:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("v-toolbar-title",[e._v("Doclight")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",disabled:0===e.$store.state.images.length},on:{click:e.downloadPdf}},[n("v-icon",[e._v("save_alt")])],1)],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("v-text-field",{attrs:{label:"Document title"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e.$store.state.images.length>0?n("image-list"):e._e(),e.imageCaptureSupported?e._e():n("div",{staticClass:"capture-unsupported-warning"},[n("p",[e._v(" Doclight is best used from a mobile browser that "),n("a",{attrs:{href:"https://caniuse.com/html-media-capture"}},[e._v("supports media capture")]),e._v(". ")]),n("p",[e._v(" You can still select JPEG images from this device to convert to a PDF. ")])])],1),n("v-btn",{attrs:{fixed:"",bottom:"",right:"",fab:"",dark:"",color:"primary","aria-label":"Add photo"},on:{click:e.addImage}},[n("v-icon",[e._v(e._s(e.imageCaptureSupported?"camera_alt":"add_photo_alternate"))])],1)],1),e.$store.state.snackbars.$load?n("snackbars"):e._e()],1)},o=[],c=(n("99af"),n("b0c0"),n("3ca3"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),n("b85c")),i=(n("96cf"),n("1da1")),s=n("d4ec"),u=n("bee2"),f=n("262e"),l=n("2caf"),d=n("9ab4"),p=n("1b40");function m(){var e=document.createElement("input");return e.type="file",e.accept="image/jpeg","capture"in e}var b=n.e("chunk-4ba3999c").then(n.bind(null,"434c")),h=b,g=function(e){Object(f["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.drawer=null,e.imageCaptureSupported=!0,e}return Object(u["a"])(n,[{key:"created",value:function(){var e=this;this.imageCaptureSupported=m();var t=new Date;this.name="".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear()," ")+"".concat(t.getHours(),":")+"".concat(t.getMinutes()<10?"0":"").concat(t.getMinutes()),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e.$store.commit("storePwaEvent",t),!localStorage.getItem("doclight:pwaPromptDontShow")&&e.imageCaptureSupported&&e.$store.commit("snackbars/show","pwaPrompt")}))}},{key:"addImage",value:function(){var e=this,t=document.createElement("input");t.type="file",t.accept="image/jpeg",t.setAttribute("capture","environment"),t.style.display="none",t.addEventListener("input",(function(){var n;null!==t&&void 0!==t&&null!==(n=t.files)&&void 0!==n&&n[0]&&e.$store.commit("addImage",t.files[0])})),document.body.appendChild(t),t.click(),t.remove()}},{key:"createPdf",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h;case 2:t=e.sent,n=t.PdfJob.new(),r=Object(c["a"])(this.$store.state.images),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=20;break}return o=a.value,e.t0=n,e.t1=Uint8Array,e.next=13,fetch(o);case 13:return e.next=15,e.sent.arrayBuffer();case 15:e.t2=e.sent,e.t3=new e.t1(e.t2),e.t0.add_image.call(e.t0,e.t3);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t4=e["catch"](5),r.e(e.t4);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return e.prev=28,i=n.create_pdf(),e.abrupt("return",new Blob([i],{type:"application/pdf"}));case 33:return e.prev=33,e.t5=e["catch"](28),console.error(e.t5),e.abrupt("return",null);case 37:case"end":return e.stop()}}),e,this,[[5,22,25,28],[28,33]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadPdf",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createPdf();case 2:t=e.sent,t?(n=document.createElement("a"),n.href=URL.createObjectURL(t),n.download="".concat(this.$store.state.documentName,".pdf"),n.style.display="none",document.body.appendChild(n),n.click(),n.remove(),this.$store.commit("snackbars/show","downloadSuccess")):this.$store.commit("snackbars/show","downloadError");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"name",get:function(){return this.$store.state.documentName},set:function(e){this.$store.commit("setName",e)}}]),n}(p["b"]);g=Object(d["a"])([Object(p["a"])({components:{Snackbars:function(){return n.e("chunk-4513154d").then(n.bind(null,"c34e"))},ImageList:function(){return n.e("chunk-26b43b54").then(n.bind(null,"669b"))}}})],g);var v=g,_=v,w=n("2877"),y=n("6544"),k=n.n(y),x=n("7496"),j=n("40dc"),S=n("8336"),O=n("a523"),P=n("132d"),E=n("f6c4"),$=n("2fa4"),A=n("8654"),C=n("2a7f"),L=Object(w["a"])(_,a,o,!1,null,null,null),D=L.exports;k()(L,{VApp:x["a"],VAppBar:j["a"],VBtn:S["a"],VContainer:O["a"],VIcon:P["a"],VMain:E["a"],VSpacer:$["a"],VTextField:A["a"],VToolbarTitle:C["a"]});var I=n("f309"),N=n("fcf4");r["a"].use(I["a"]);var R=new I["a"]({icons:{iconfont:"md"},theme:{themes:{light:{primary:N["a"].indigo}}}}),T=(n("a434"),n("2f62"));r["a"].use(T["a"]);var M=new T["a"].Store({state:{documentName:"",images:[],pwaEvent:null},mutations:{setName:function(e,t){e.documentName=t},addImage:function(e,t){e.images.push(URL.createObjectURL(t))},moveImageLeft:function(e,t){if(t>0&&t<e.images.length){var n=e.images[t-1];r["a"].set(e.images,t-1,e.images[t]),r["a"].set(e.images,t,n)}},moveImageRight:function(e,t){if(t>=0&&t<e.images.length-1){var n=e.images[t+1];r["a"].set(e.images,t+1,e.images[t]),r["a"].set(e.images,t,n)}},deleteImage:function(e,t){URL.revokeObjectURL(e.images.splice(t,1)[0])},storePwaEvent:function(e,t){e.pwaEvent=t}},modules:{snackbars:{namespaced:!0,state:{$load:!1,downloadSuccess:!1,downloadError:!1,pwaPrompt:!1},mutations:{show:function(e,t){"$load"!==t&&(e.$load=!0,e[t]=!0)},hide:function(e,t){"$load"!==t&&(e[t]=!1)}}}},strict:!1});"serviceWorker"in navigator&&n.e("chunk-2d21a3c8").then(n.bind(null,"bb3e")),r["a"].config.productionTip=!1,new r["a"]({vuetify:R,store:M,render:function(e){return e(D)}}).$mount("#app")}});
//# sourceMappingURL=app.96867f0a.js.map