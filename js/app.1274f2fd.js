(function(e){function t(t){for(var a,r,i=t[0],s=t[1],u=t[2],l=0,d=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);m&&m(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-26b43b54":"424e21c8","chunk-2d21a3c8":"ee33c3d9","chunk-4513154d":"9bbb7434","chunk-4ba3999c":"68077b97"}[e]+".js"}var s={};var u={"62ea":function(){return{"./doclight_wasm_bg.js":{__wbindgen_object_drop_ref:function(e){return a["21ff"].exports["k"](e)},__wbindgen_object_clone_ref:function(e){return a["21ff"].exports["j"](e)},__wbg_new0_1dc5063f3422cdfe:function(){return a["21ff"].exports["h"]()},__wbindgen_string_new:function(e,t){return a["21ff"].exports["m"](e,t)},__wbindgen_debug_string:function(e,t){return a["21ff"].exports["i"](e,t)},__wbg_getFullYear_d36bab73ea41bdb6:function(e){return a["21ff"].exports["c"](e)},__wbg_getMonth_230e874babdb45b0:function(e){return a["21ff"].exports["f"](e)},__wbg_getDate_135a9258de93192a:function(e){return a["21ff"].exports["b"](e)},__wbg_getHours_a4567070ccd729ea:function(e){return a["21ff"].exports["d"](e)},__wbg_getMinutes_64a0cad5794f4969:function(e){return a["21ff"].exports["e"](e)},__wbg_getSeconds_8eb60717571f83cf:function(e){return a["21ff"].exports["g"](e)},__wbindgen_throw:function(e,t){return a["21ff"].exports["n"](e,t)},__wbindgen_rethrow:function(e){return a["21ff"].exports["l"](e)}}}}};function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-26b43b54":1,"chunk-4513154d":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-26b43b54":"58e8f006","chunk-2d21a3c8":"31d6cfe0","chunk-4513154d":"31b85913","chunk-4ba3999c":"31d6cfe0"}[e]+".css",o=l.p+a,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===a||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],u=s.getAttribute("data-href");if(u===a||u===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],f.parentNode.removeChild(f),n(c)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var d,f=document.createElement("script");f.charset="utf-8",f.timeout=120,l.nc&&f.setAttribute("nonce",l.nc),f.src=i(e);var p=new Error;d=function(t){f.onerror=f.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",p.name="ChunkLoadError",p.type=a,p.request=r,n[1](p)}o[e]=void 0}};var m=setTimeout((function(){d({type:"timeout",target:f})}),12e4);f.onerror=f.onload=d,document.head.appendChild(f)}var b={"chunk-4ba3999c":["62ea"]}[e]||[];return b.forEach((function(e){var n=s[e];if(n)t.push(n);else{var a,r=u[e](),o=fetch(l.p+""+{"62ea":"34ee4400dd0c69624e92"}[e]+".module.wasm");if(r instanceof Promise&&"function"===typeof WebAssembly.compileStreaming)a=Promise.all([WebAssembly.compileStreaming(o),r]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"===typeof WebAssembly.instantiateStreaming)a=WebAssembly.instantiateStreaming(o,r);else{var c=o.then((function(e){return e.arrayBuffer()}));a=c.then((function(e){return WebAssembly.instantiate(e,r)}))}t.push(s[e]=a.then((function(t){return l.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/doclight/",l.oe=function(e){throw console.error(e),e},l.w={};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],f=d.push.bind(d);d.push=t,d=d.slice();for(var p=0;p<d.length;p++)t(d[p]);var m=f;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},cd49:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Doclight")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",disabled:0===e.$store.state.images.length},on:{click:e.downloadPdf}},[n("v-icon",[e._v("save_alt")])],1)],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("v-text-field",{attrs:{label:"Document name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e.$store.state.images.length>0?n("image-list"):e._e(),e.imageCaptureSupported?e._e():n("div",{staticClass:"capture-unsupported-warning"},[n("p",[e._v(" Doclight is best used from a mobile browser that "),n("a",{attrs:{href:"https://caniuse.com/html-media-capture"}},[e._v("supports media capture")]),e._v(". ")]),n("p",[e._v(" You can still select JPEG images from this device to convert to a PDF. ")])])],1),e.imageCaptureSupported?n("v-speed-dial",{attrs:{fixed:"",bottom:"",right:"",dark:""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-btn",{attrs:{fab:"",color:"primary","aria-label":"Add photo"},on:{click:function(t){return t.stopPropagation(),e.addImage(t)},contextmenu:function(t){t.preventDefault(),e.speedDial=!0}}},[n("v-icon",[e._v("camera_alt")])],1)]},proxy:!0}],null,!1,3075975333),model:{value:e.speedDial,callback:function(t){e.speedDial=t},expression:"speedDial"}},[n("v-btn",{attrs:{fab:"",small:"",color:"primary","aria-label":"Add photo from device"},on:{click:function(t){return t.stopPropagation(),e.addImage(!1)}}},[n("v-icon",[e._v("add_photo_alternate")])],1)],1):n("v-btn",{attrs:{fixed:"",bottom:"",right:"",fab:"",dark:"",color:"primary","aria-label":"Add photo"},on:{click:function(t){return e.addImage(!1)}}},[n("v-icon",[e._v("add_photo_alternate")])],1)],1),n("v-navigation-drawer",{attrs:{app:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-divider"),n("v-list",[n("v-list-item",{attrs:{href:"https://github.com/Quantaly/doclight",target:"_blank"}},[n("v-list-item-action",[n("v-icon",[e._v("code")])],1),n("v-list-item-content",[e._v(" View source code ")])],1),n("v-list-item",{attrs:{href:"https://github.com/Quantaly/doclight/issues/new",target:"_blank"}},[n("v-list-item-action",[n("v-icon",[e._v("bug_report")])],1),n("v-list-item-content",[e._v("Report an issue")])],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),e.$store.state.snackbars.$load?n("snackbars"):e._e()],1)},o=[],c=(n("99af"),n("b0c0"),n("3ca3"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),n("b85c")),i=(n("96cf"),n("1da1")),s=n("d4ec"),u=n("bee2"),l=n("262e"),d=n("2caf"),f=n("9ab4"),p=n("1b40");function m(){var e=document.createElement("input");return e.type="file",e.accept="image/jpeg","capture"in e}var b=/[<>:"/\\|?*]/g;function v(e){return e.replaceAll(b,"_")}var h=v,g=n.e("chunk-4ba3999c").then(n.bind(null,"434c")),_=g,w=function(e){Object(l["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.drawer=null,e.imageCaptureSupported=!0,e.speedDial=!1,e}return Object(u["a"])(n,[{key:"created",value:function(){var e=this;this.imageCaptureSupported=m();var t=new Date;this.name="".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear()," ")+"".concat(t.getHours(),":")+"".concat(t.getMinutes()<10?"0":"").concat(t.getMinutes()),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e.$store.commit("storePwaEvent",t),!localStorage.getItem("doclight:pwaPromptDontShow")&&e.imageCaptureSupported&&e.$store.commit("snackbars/show","pwaPrompt")}))}},{key:"addImage",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=document.createElement("input");n.type="file",n.accept="image/jpeg",t&&"capture"in n&&(n.capture=!0),n.style.display="none",n.addEventListener("input",(function(){var t;null!==n&&void 0!==n&&null!==(t=n.files)&&void 0!==t&&t[0]&&e.$store.commit("addImage",n.files[0])})),document.body.appendChild(n),n.click(),n.remove()}},{key:"createPdf",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_;case 2:t=e.sent,n=t.PdfJob.new(),a=Object(c["a"])(this.$store.state.images),e.prev=5,a.s();case 7:if((r=a.n()).done){e.next=20;break}return o=r.value,e.t0=n,e.t1=Uint8Array,e.next=13,fetch(o);case 13:return e.next=15,e.sent.arrayBuffer();case 15:e.t2=e.sent,e.t3=new e.t1(e.t2),e.t0.add_image.call(e.t0,e.t3);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t4=e["catch"](5),a.e(e.t4);case 25:return e.prev=25,a.f(),e.finish(25);case 28:return e.prev=28,i=n.create_pdf(),e.abrupt("return",new Blob([i],{type:"application/pdf"}));case 33:return e.prev=33,e.t5=e["catch"](28),console.error(e.t5),e.abrupt("return",null);case 37:case"end":return e.stop()}}),e,this,[[5,22,25,28],[28,33]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadPdf",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createPdf();case 2:t=e.sent,t?(n=document.createElement("a"),n.href=URL.createObjectURL(t),n.download="".concat(h(this.$store.state.documentName),".pdf"),n.style.display="none",document.body.appendChild(n),n.click(),n.remove(),this.$store.commit("snackbars/show","downloadSuccess")):this.$store.commit("snackbars/show","downloadError");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"name",get:function(){return this.$store.state.documentName},set:function(e){this.$store.commit("setName",e)}}]),n}(p["b"]);w=Object(f["a"])([Object(p["a"])({components:{Snackbars:function(){return n.e("chunk-4513154d").then(n.bind(null,"c34e"))},ImageList:function(){return n.e("chunk-26b43b54").then(n.bind(null,"669b"))}}})],w);var y=w,k=y,x=n("2877"),j=n("6544"),S=n.n(j),P=n("7496"),O=n("40dc"),E=n("5bc1"),A=n("8336"),D=n("a523"),L=n("ce7e"),$=n("132d"),V=n("8860"),C=n("da13"),I=n("1800"),N=n("5d23"),R=n("f6c4"),T=n("f774"),M=n("2fa4"),B=n("c73b"),U=n("8654"),W=n("2a7f"),F=Object(x["a"])(k,r,o,!1,null,null,null),J=F.exports;S()(F,{VApp:P["a"],VAppBar:O["a"],VAppBarNavIcon:E["a"],VBtn:A["a"],VContainer:D["a"],VDivider:L["a"],VIcon:$["a"],VList:V["a"],VListItem:C["a"],VListItemAction:I["a"],VListItemContent:N["a"],VMain:R["a"],VNavigationDrawer:T["a"],VSpacer:M["a"],VSpeedDial:B["a"],VTextField:U["a"],VToolbarTitle:W["a"]});var H=n("f309"),Y=n("fcf4");a["a"].use(H["a"]);var q=new H["a"]({icons:{iconfont:"md"},theme:{themes:{light:{primary:Y["a"].indigo}}}}),Q=(n("a434"),n("2f62"));a["a"].use(Q["a"]);var G=new Q["a"].Store({state:{documentName:"",images:[],pwaEvent:null},mutations:{setName:function(e,t){e.documentName=t},addImage:function(e,t){e.images.push(URL.createObjectURL(t))},moveImageLeft:function(e,t){if(t>0&&t<e.images.length){var n=e.images[t-1];a["a"].set(e.images,t-1,e.images[t]),a["a"].set(e.images,t,n)}},moveImageRight:function(e,t){if(t>=0&&t<e.images.length-1){var n=e.images[t+1];a["a"].set(e.images,t+1,e.images[t]),a["a"].set(e.images,t,n)}},deleteImage:function(e,t){URL.revokeObjectURL(e.images.splice(t,1)[0])},storePwaEvent:function(e,t){e.pwaEvent=t}},modules:{snackbars:{namespaced:!0,state:{$load:!1,downloadSuccess:!1,downloadError:!1,pwaPrompt:!1},mutations:{show:function(e,t){"$load"!==t&&(e.$load=!0,e[t]=!0)},hide:function(e,t){"$load"!==t&&(e[t]=!1)}}}},strict:!1});"serviceWorker"in navigator&&n.e("chunk-2d21a3c8").then(n.bind(null,"bb3e")),a["a"].config.productionTip=!1,new a["a"]({vuetify:q,store:G,render:function(e){return e(J)}}).$mount("#app")}});
//# sourceMappingURL=app.1274f2fd.js.map